---
outline: "deep"
---

# 模板与配置

## WXML 模板语法

### 1.数据绑定

1. 数据绑定的基本原则
   ① 在 data 中定义数据
   ② 在 WXML 中使用数据
2. 在 data 中定义页面的数据
   在页面对应的 .js 文件中，把数据定义到 data 对象中即可：

```js
Page({
  data: {
    info: "init data",
  },
});
```

3. Mustache 语法的格式
   把 data 中的数据绑定到页面中渲染，使用 Mustache 语法（双大括号）将变量包起来即可。语法格式为：

```html
<view>{{info}}</view>
```

4. Mustache 语法的应用场景
   Mustache 语法的主要应用场景如下：

- 绑定内容

```html
<view>{{info}}</view>
```

- 绑定属性

```html
<image src="{{src}}"></image>
```

- 运算（三元运算、算术运算等）

```html
<view>{{count>1?'yes':'no'}}</view>
```

### 2.事件绑定

1. 什么是事件
   事件是渲染层到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理。
2. 小程序中常用的事件：

| 类型   |         绑定方式          | 事件描述                                        |
| ------ | :-----------------------: | ----------------------------------------------- |
| tap    |    bindtap 或 bind:tap    | 手指触摸后马上离开，类似于 HTML 中的 click 事件 |
| input  |  bindinput 或 bind:input  | 文本框的输入事件                                |
| change | bindchange 或 bind:change | 状态改变时触发                                  |

3. 事件对象的属性列表
   当事件回调触发的时候，会收到一个事件对象 event，它的详细属性如下表所示：

| 属性           |  类型   | 说明                                         |
| -------------- | :-----: | -------------------------------------------- |
| type           | String  | 事件类型                                     |
| timeStamp      | Integer | 页面打开到触发事件所经过的毫秒数             |
| target         | Object  | 触发事件的组件的一些属性值集合               |
| currentTarget  | Object  | 当前组件的一些属性值集合                     |
| detail         | Object  | 触摸事件，当前停留在屏幕中的触摸点信息的数组 |
| changedTouches |  Array  | 触摸事件，当前变化的触摸点信息的数组         |

4. target 和 currentTarget 的区别
   target 是触发该事件的源头组件，而 currentTarget 则是当前事件所绑定的组件。

点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。
此时，对于外层的 view 来说：

- e.target 指向的是触发事件的源头组件，因此，e.target 是内部的按钮组件
- e.currentTarget 指向的是当前正在触发事件的那个组件，因此，e.currentTarget 是当前的 view 组件

5. bindtap 的语法格式
   在小程序中，不存在 HTML 中的 onclick 鼠标点击事件，而是通过 tap 事件来响应用户的触摸行为。
   ① 通过 bindtap，可以为组件绑定 tap 触摸事件，语法如下：

```html
<view bindtap="handleTap">点我</view>
```

```js
Page({
  handleTap(e) {
    console.log(e);
  },
});
```

6. 在事件处理函数中为 data 中的数据赋值
