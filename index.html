<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>github actions自动部署gitee | blog</title>
    <meta name="description" content="vue js node html css">
    <link rel="stylesheet" href="/blog-site/assets/style.856ecd01.css">
    <link rel="modulepreload" href="/blog-site/assets/app.3f3633f4.js">
    <link rel="modulepreload" href="/blog-site/assets/index.md.6b0802cb.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/blog-site/" data-v-6a6f7ff6><!----><!--[-->blog<!--]--></a></div><div class="content" data-v-8856f192><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><!----><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _blog-site_index" data-v-79ca2460><div><h1 id="github-actions自动部署gitee" tabindex="-1">github actions自动部署gitee <a class="header-anchor" href="#github-actions自动部署gitee" aria-hidden="true">#</a></h1><p>说明：当你的代码每次提交到github上时，代码可以自动同步到gitee，并且可以实现自动部署。</p><ol><li><p>在github和gitee分别创建代码仓库，并且仓库要设置为公开的状态</p></li><li><p>cmd中运行 <code>ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</code> ，连续三次回车，生成公钥(.pub)和私钥，记得替换成自己的邮箱地址。</p></li><li><p>github点击个人头像下面的 <code>Settings -&gt; Developer settings -&gt; Personal access tokens</code> 生成一个新的令牌(勾选上仓库信息一项，或者全部勾选也无大碍)，记得保存这个令牌，离开该页面就看不见了。当然你也可以重新生成，不过下面的变量也需要跟着改变。</p></li><li><p>github点击个人头像下面的 <code>Settings -&gt; Developer settings -&gt; SSH and GPG keys</code> 将刚才生成的公钥配置进去，名字随意</p></li><li><p>gitee点击个人头像下面的 <code>设置 -&gt; 安全设置 -&gt; SSH公钥</code> 将刚才生成的公钥配置进去，名字随意</p></li><li><p>进入github对应的代码仓库 进入 <code>settings -&gt; secrets -&gt; actions</code> 中分别配置如下三个变量</p></li></ol><table><thead><tr><th>变量名</th><th style="text-align:center;">值</th></tr></thead><tbody><tr><td>ACCESS_TOKEN</td><td style="text-align:center;">步骤三生成的令牌</td></tr><tr><td>GITEE_RSA_PRIVATE_KEY</td><td style="text-align:center;">步骤二生成的密钥</td></tr><tr><td>GITEE_PASSWORD</td><td style="text-align:center;">gitee密码</td></tr></tbody></table><ol start="7"><li>在你的项目根目录下创建.github/workflows文件夹，再此文件夹下面新建一个yml文件，名字随意,复制下面的任务命令到文件夹下面</li></ol><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">name: Build and Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">on: </span><span style="color:#676E95;font-style:italic;"># 事件</span></span>
<span class="line"><span style="color:#A6ACCD;">  push:</span></span>
<span class="line"><span style="color:#A6ACCD;">    branches:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - main </span><span style="color:#676E95;font-style:italic;">#推送到远程分支main之后触发</span></span>
<span class="line"><span style="color:#A6ACCD;">jobs: </span><span style="color:#676E95;font-style:italic;"># 任务</span></span>
<span class="line"><span style="color:#A6ACCD;">  build:</span></span>
<span class="line"><span style="color:#A6ACCD;">    runs-on: ubuntu-latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    steps:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Checkout 🛎️</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: actions/checkout@v2.3.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Install and Build 🔧 </span><span style="color:#676E95;font-style:italic;"># 此示例项目使用npm构建，并将结果输出到“build”文件夹。替换为生成项目所需的命令，或者如果站点是预构建的，则完全删除此步骤.</span></span>
<span class="line"><span style="color:#A6ACCD;">        run: </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">          npm install   </span><span style="color:#676E95;font-style:italic;"># 先安装依赖</span></span>
<span class="line"><span style="color:#A6ACCD;">          npm run build:prod </span><span style="color:#676E95;font-style:italic;"># 执行打包命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Deploy 🚀</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: JamesIves/github-pages-deploy-action@4.1.6</span></span>
<span class="line"><span style="color:#A6ACCD;">        env:</span></span>
<span class="line"><span style="color:#A6ACCD;">          ACCESS_TOKEN: </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">{ secrets.ACCESS_TOKEN </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">} </span><span style="color:#676E95;font-style:italic;"># 自己仓库配置的令牌</span></span>
<span class="line"><span style="color:#A6ACCD;">        with:</span></span>
<span class="line"><span style="color:#A6ACCD;">          branch: gh-pages </span><span style="color:#676E95;font-style:italic;"># 将打包后的目录部署在gh-pages分支</span></span>
<span class="line"><span style="color:#A6ACCD;">          folder: dist </span><span style="color:#676E95;font-style:italic;"># 打包后生成的目录地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">#以下配置同步代码到gitee仓库并自动部署</span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Sync to Gitee</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: wearerequired/git-mirror-action@master</span></span>
<span class="line"><span style="color:#A6ACCD;">        env:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span>
<span class="line"><span style="color:#A6ACCD;">          SSH_PRIVATE_KEY: </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">{ secrets.GITEE_RSA_PRIVATE_KEY </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">} </span><span style="color:#676E95;font-style:italic;"># 仓库配置的私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">        with:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意替换为你的 GitHub 源仓库地址</span></span>
<span class="line"><span style="color:#A6ACCD;">          source-repo: git@github.com:mao-118/fast-vue-admin.git</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意替换为你的 Gitee 目标仓库地址</span></span>
<span class="line"><span style="color:#A6ACCD;">          destination-repo: git@gitee.com:mao-118/fast-vue-admin.git</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Build Gitee Pages</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: yanglbme/gitee-pages-action@main</span></span>
<span class="line"><span style="color:#A6ACCD;">        with:</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意替换为你的 Gitee 用户名</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee-username: mao-118</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee-password: </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">{ secrets.GITEE_PASSWORD </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee-repo: mao-118/fast-vue-admin</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># 要部署的分支，默认是 master，若是其他分支，则需要指定(指定的分支必须存在)</span></span>
<span class="line"><span style="color:#A6ACCD;">          branch: gh-pages</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ol start="8"><li>微信关注 <code>gitee</code> 公众号，这样可以绕开校验，直接登录你的gitee（国外）</li><li>之后每次提交代码到github的 main分支下就会同步到gitee中，并且会自动部署(gitee记得打开 <code>gitee pages</code> 服务)</li></ol></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><!----><!----></div><!----></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"6b0802cb\"}")</script>
    <script type="module" async src="/blog-site/assets/app.3f3633f4.js"></script>
    
  </body>
</html>